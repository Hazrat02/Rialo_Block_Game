<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rialo Mini Game</title>
  <link rel="shortcut icon" href="./assets/img/icon.png" type="image/x-icon">
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
  <style>
    body {
      background: 
        url('./assets/img/bg.svg') no-repeat center center,
        #0d1117;
      background-size: cover;
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      overflow: hidden;
      position: relative;
    }

    /* Floating buttons */
    .floating-links {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none; /* so the game still clickable */
    }

    .float-btn {
      position: absolute;
      display: flex;
      align-items: center;
      gap: 8px;
      background: rgba(0, 188, 212, 0.15);
      border: 1px solid #00bcd4;
      color: #fff;
      font-weight: 600;
      padding: 8px 14px;
      border-radius: 30px;
      text-decoration: none;
      transition: transform 0.3s, background 0.3s, box-shadow 0.3s;
      pointer-events: auto; /* clickable */
      backdrop-filter: blur(6px);
      animation: floatMove 8s ease-in-out infinite alternate;
      box-shadow: 0 0 12px rgba(0, 188, 212, 0.2);
    }

    .float-btn img {
      width: 22px;
      height: 22px;
    }

    .float-btn:hover {
      background: rgba(0, 188, 212, 0.3);
      transform: scale(1.1);
      box-shadow: 0 0 20px rgba(0, 188, 212, 0.6);
    }

    .discord {
      top: 20%;
      left: 5%;
      animation-delay: 0s;
    }

    .about {
      top: 40%;
      right: 5%;
      animation-delay: 2s;
    }

    @keyframes floatMove {
      0% {
        transform: translateY(0px) rotate(0deg);
      }
      50% {
        transform: translateY(-15px) rotate(1deg);
      }
      100% {
        transform: translateY(10px) rotate(-1deg);
      }
    }

    #gameArea {
      position: relative;
      width: 300px;
      height: 400px;
      border: 2px solid #00bcd4;
      overflow: hidden;
      background-color: #111827;
      margin-bottom: 20px;
      border-radius: 10px;
    }

#player {
  position: absolute;
  bottom: 10px;
  left: 130px;
  width: 40px;
  height: 40px;
  background: url('./assets/img/icon.png') no-repeat center center;
  background-size: contain; /* or "cover" depending on look */
  border-radius: 8px;
  transition: left 0.1s linear;
}

    .block {
      position: absolute;
      top: 0;
      width: 40px;
      height: 40px;
      background-color: #e74c3c;
      border-radius: 8px;
    }

    .btn-controls {
      display: flex;
      justify-content: center;
      gap: 10px;
    }

    button {
      width: 100px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <!-- Floating Buttons -->
  <div class="floating-links" style="z-index: 333;">
    <a href="https://discord.com/invite/RialoProtocol" target="_blank" class="float-btn discord">
      <img src="https://cdn-icons-png.flaticon.com/512/2111/2111370.png" alt="Discord" />
      <span>Rialo Discord</span>
    </a>

    <a href="https://www.rialo.io/" class="float-btn about">
      <img style="width: 80px;" src="./assets/img/logo.png" alt="About" />
    
    </a>
  </div>

  <!-- Title -->
  <h3 class="mb-3 mt-2 text-info fw-bold"><img style="width: 120px;" src="./assets/img/logo.png" alt=""> Falling Blocks</h3>

  <!-- Game area -->
  <div id="gameArea">
    <div id="player"></div>
  </div>

  <!-- Score -->
  <div class="mb-2">
    <h5>Score: <span id="score">0</span> | High Score: <span id="highScore">0</span></h5>
  </div>

  <!-- Controls -->
  <div class="btn-controls mb-3">
    <button id="leftBtn" class="btn btn-primary">â¬… Left</button>
    <button id="rightBtn" class="btn btn-primary">Right âž¡</button>
  </div>

  <button id="playBtn" class="btn btn-success">Play Game</button>

  <script>
    // Game logic
    const player = document.getElementById("player");
    const gameArea = document.getElementById("gameArea");
    const scoreDisplay = document.getElementById("score");
    const highScoreDisplay = document.getElementById("highScore");
    const leftBtn = document.getElementById("leftBtn");
    const rightBtn = document.getElementById("rightBtn");
    const playBtn = document.getElementById("playBtn");

    let playerX = 130;
    let score = 0;
    let gameInterval;
    const speed = 2;
    let highScore = localStorage.getItem("rialo_high_score") || 0;
    highScoreDisplay.textContent = highScore;
    let gameRunning = false;

    function movePlayer(direction) {
      if (!gameRunning) return;
      if (direction === "left" && playerX > 0) playerX -= 20;
      if (direction === "right" && playerX < 260) playerX += 20;
      player.style.left = playerX + "px";
    }

    document.addEventListener("keydown", (e) => {
      if (e.key === "ArrowLeft") movePlayer("left");
      if (e.key === "ArrowRight") movePlayer("right");
    });

    leftBtn.addEventListener("click", () => movePlayer("left"));
    rightBtn.addEventListener("click", () => movePlayer("right"));

    function createBlock() {
      const block = document.createElement("div");
      block.classList.add("block");
      block.style.left = Math.floor(Math.random() * 7) * 40 + "px";
      gameArea.appendChild(block);

      let topPos = 0;
      const fallInterval = setInterval(() => {
        if (!gameRunning) {
          clearInterval(fallInterval);
          return;
        }
        topPos += speed;
        block.style.top = topPos + "px";

        if (topPos > 360) {
          block.remove();
          clearInterval(fallInterval);
          score++;
          scoreDisplay.textContent = score;
        }

        const playerRect = player.getBoundingClientRect();
        const blockRect = block.getBoundingClientRect();
        if (
          playerRect.left < blockRect.right &&
          playerRect.right > blockRect.left &&
          playerRect.top < blockRect.bottom &&
          playerRect.bottom > blockRect.top
        ) {
          endGame();
          clearInterval(fallInterval);
        }
      }, 20);
    }

    function startGame() {
      if (gameRunning) return;
      gameRunning = true;
      score = 0;
      scoreDisplay.textContent = score;
      playerX = 130;
      player.style.left = playerX + "px";
      playBtn.textContent = "Restart";
      const blocks = document.querySelectorAll(".block");
      blocks.forEach((b) => b.remove());
      gameInterval = setInterval(() => createBlock(), 1000);
    }

    function endGame() {
      gameRunning = false;
      clearInterval(gameInterval);
      const blocks = document.querySelectorAll(".block");
      blocks.forEach((b) => b.remove());

      if (score > highScore) {
        localStorage.setItem("rialo_high_score", score);
        highScoreDisplay.textContent = score;
      }

      alert("Game Over! Your score: " + score);
    }

    playBtn.addEventListener("click", startGame);

    // About modal
    function showAbout() {
      alert("ðŸŽ® Rialo Falling Blocks\n\nCreated by the Rialo Team.\nEnjoy the game and join our Discord for updates!");
    }
  </script>
</body>
</html>
